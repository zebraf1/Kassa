{#
@var members Member[]
#}
{% extends "RotaliaInventoryBundle::layout.html.twig" %}

{% block title%}Krediidihaldus{% endblock %}


{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/rotaliainventory/jquery.alerts-1.1/jquery.alerts.css') }}" rel="stylesheet">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/rotaliainventory/js/credit.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/rotaliainventory/jquery.alerts-1.1/jquery.alerts.js') }}"></script>
{% endblock %}


{% block body %}
    <h1>Krediidihaldus</h1>
    <div>
        {% block flash %}{{ parent() }}{% endblock %}

        <table class="data sortable">
            <tr>
                <th>Kasutaja</th>
                <th>Krediit</th>
                <th>#</th>
            </tr>
            {% for member in members %}
                <tr class="credit-row {{ cycle(['even', 'odd'], loop.index) }}">
                    <td>{{ member.fullName }}</td>
                    <td class="credit credit-{{ member.credit.creditStatus }}">
                        {{- member.credit.credit | number_format(2, '.', ',') ~ 'â‚¬' -}}
                    </td>
                    <td>
                        <a href="{{ path('RotaliaInventory_purchaseLogMember', {'memberId':member.id}) }}">Logi</a>
                        <a href="#" data-member="{{ member.id }}" class="adjustMemberCredit">Muuda</a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="100">Liikmeid ei leitud</td>
                </tr>
            {% endfor %}

            {% include 'RotaliaInventoryBundle::pagination.html.twig' with {
            pager: members,
            url: url('RotaliaInventory_creditManagementList', {page:'__page__'})}
            %}
        </table>
    </div>
{% endblock %}
