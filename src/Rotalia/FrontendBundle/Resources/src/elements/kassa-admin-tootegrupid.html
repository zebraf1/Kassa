<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">

<link rel="import" href="kassa-page-behavior.html">
<link rel="import" href="kassa-behavior.html">
<link rel="import" href="kassa-confirm-button.html">
<link rel="import" href="kassa-table.html">

<dom-module id="kassa-admin-tootegrupid">
    <template>
        <kassa-table items="[[productGroups]]" kassa-scroll-target edit-func="doProductGroupsPatch" add-func="doProductGroupsPost" dialog="[[dialog]]">
            <data-table-column name="Id" width="2em" align-right flex="0">
                <template>
                    <span>[[item.id]]</span>
                </template>
            </data-table-column>
            <data-table-column name="Nimi" width="5em" flex="1"  filter-by="name">
                <template> 
                    <span>[[item.name]]</span>
                </template>
            </data-table-column>
            <data-table-column name="Järjekord" width="3em" align-right flex="0">
                <template>
                    <span>[[item.seq]]</span>
                </template>
            </data-table-column>
        </kassa-table>
        
        <paper-dialog id="productGroupsDialog" modal style="max-width: 350px">
            <paper-material class="spilt-v">
                <div class="split-h"><paper-input data-field="name" label="Nimi" type="text"></paper-input></div>
                <div class="split-h"><paper-input data-field="seq" label="Järjekord" type="number" min="0"></paper-input></div>
            </paper-material>
            <div class="buttons">   
                <paper-button dialog-dismiss raised>Sulge</paper-button>
                <kassa-confirm-button>Salvesta</kassa-confirm-button>
            </div>
        </paper-dialog>
    
    </template>
    <script>
        Polymer({
            is: "kassa-admin-tootegrupid",
            properties: {
                productGroups: {
                    type: Array,
                },
                dialog: {
                    type: Node,
                    value: function() {
                        return this.$.productGroupsDialog
                    }
                }
            },
            behaviors: [PageBehavior, KassaBehavior],
            setUp: function() {
                this.fire('kassa-backend-action', {action: 'doProductGroupsGet'});
            }
        })
    </script>
</dom-module>



