<html><head><link rel="import" href="../bower_components/polymer/polymer.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="../bower_components/paper-dialog/paper-dialog.html"><link rel="import" href="kassa-behavior.html"></head><body><dom-module id="kassa-date-picker"><template><style>.date-button{color:#000;background-color:#FFF;border:1px solid #aaaaaa;}</style><paper-button class="date-button" on-tap="_showStartDate">[[format(selectedStartDate, 'DD-MM-YYYY')]]</paper-button><span>-</span><paper-button class="date-button" on-tap="_showEndDate">[[format(selectedEndDate, 'DD-MM-YYYY')]]</paper-button><paper-dialog id="dialog" class="paper-date-picker-dialog" modal="" on-iron-overlay-closed="_dismissDialog"><div class="buttons"><paper-button dialog-dismiss="">Cancel</paper-button><paper-button dialog-confirm="">OK</paper-button></div></paper-dialog></template><script>Polymer({is:'kassa-date-picker',properties:{startDate:{type:Object,observer:'_onStartDateChange',value:function(){return{year:1913,month:10,day:10}}},endDate:{type:Object,observer:'_onEndDateChange',value:function(){return{year:new Date().getFullYear(),month:new Date().getMonth(),day:new Date().getDate()}}},minDate:{type:Date,computed:'_computeMinDate(startDate, selectedStartDate, settingStart)'},maxDate:{type:Date,computed:'_computeMaxDate(endDate, selectedEndDate, settingStart)'},settingStart:{type:Boolean,value:!0,readOnly:!0},selectedStartDate:{type:Object,readOnly:!0,notify:!0},selectedEndDate:{type:Object,readOnly:!0,notify:!0},date:Date},behaviors:[KassaBehavior],format:function(b,c){return moment(b).format(c)},_dismissDialog:function(b){b.detail.confirmed&&(this.settingStart?this._setSelectedStartDate({year:this.date.getFullYear(),month:this.date.getMonth(),day:this.date.getDate()}):this._setSelectedEndDate({year:this.date.getFullYear(),month:this.date.getMonth(),day:this.date.getDate()}))},_showStartDate:function(){this._setSettingStart(!0),this.set('date',moment(this.selectedStartDate).toDate()),this.$.dialog.toggle()},_showEndDate:function(){this._setSettingStart(!1),this.set('date',moment(this.selectedEndDate).toDate()),this.$.dialog.toggle()},_computeMinDate:function(b,c,d){var f=b;return d||(f=c),new Date(f.year,f.month,f.day)},_computeMaxDate:function(b,c,d){var f=b;return d&&(f=c),new Date(f.year,f.month,f.day)},_onStartDateChange:function(b){this._setSelectedStartDate(b)},_onEndDateChange:function(b){this._setSelectedEndDate(b)}});</script></dom-module></body></html>