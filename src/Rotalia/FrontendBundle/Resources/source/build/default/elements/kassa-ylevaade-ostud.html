<html><head></head><body><dom-module id="kassa-ylevaade-ostud"><template><style>kassa-material{margin-bottom:1em;}</style><kassa-material direction="horizontal"><kassa-date-picker on-kassa-confirm="_loadPurchases" start-date="{{_startDate}}" end-date="{{_endDate}}"></kassa-date-picker></kassa-material><kassa-table items="[[purchases]]" scroll-target="[[scrollTarget]]"><vaadin-grid-column flex-grow="0" width="3em"><template class="header"><span style="text-align: right">Id</span></template><template><span style="text-align: right">[[item.id]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="1"><template class="header"><vaadin-grid-filter path="createdBy" value="[[_createdByFilter]]"><paper-input label="Ostja" value="{{_createdByFilter}}" slot="filter" no-label-float=""></paper-input></vaadin-grid-filter></template><template><span>[[item.createdBy]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="1"><template class="header"><vaadin-grid-filter path="member" value="[[_nameFilter]]"><paper-input label="Tasuja" value="{{_nameFilter}}" slot="filter" no-label-float=""></paper-input></vaadin-grid-filter></template><template><span>[[item.member]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header">Konvent</template><template><span>[[item.convent]]</span></template></vaadin-grid-column><vaadin-grid-column><template class="header">Toode</template><template><span>[[item.product.name]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header"><span style="text-align: right">Kogus</span></template><template><span style="text-align: right">[[item.count]] Ã— [[formatAmount(item.product.amount, item.product.amountType)]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header"><span style="text-align: right">Summa</span></template><template><span style="text-align: right">[[_computePrice(item.count, item.price)]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0" width="150px"><template class="header">Aeg</template><template><span>[[item.createdAt]]</span></template></vaadin-grid-column></kassa-table></template><script>Polymer({is:'kassa-ylevaade-ostud',properties:{memberId:{type:Number},purchases:{type:Array},_startDate:{type:String},_endDate:{type:String}},behaviors:[KassaBehavior,PageBehavior],observers:['_loadPurchases(paceActive)'],setUp:function(){this.$$('kassa-date-picker').ready(),this._loadPurchases()},cleanUp:function(){this.set('purchases',[])},_loadPurchases:function(){this.pageActive&&(this.fire('kassa-page-loading'),this.cleanUp(),this.fire('kassa-backend-action',{action:'doPurchasesGet',memberId:this.memberId,dateFrom:this._startDate,dateUntil:this._endDate,onSuccess:function(){this.fire('kassa-page-ready',{page:this})}.bind(this)}))},_computePrice:function(b,c){return this.eur2str(b*c)}});</script></dom-module></body></html>