<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:'on',observer:'_valueChanged'}},observers:['_requiredChanged(required)'],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute('aria-required','true'):this.removeAttribute('aria-required')},_checkedChanged:function(){this.active=this.checked,this.fire('iron-change')},_valueChanged:function(){(this.value===void 0||null===this.value)&&(this.value='on')}},Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];</script><script>Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this),this.hasRipple()&&(this.checked?this._ripple.setAttribute('checked',''):this._ripple.removeAttribute('checked'))},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);this.disabled||this.isAttached&&(this.checked=this.active)}},Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];</script><dom-module id="paper-toggle-button" assetpath="../bower_components/paper-toggle-button/"><template strip-whitespace=""><style>:host{display:inline-block;@apply --layout-horizontal;@apply --layout-center;@apply --paper-font-common-base;}:host([disabled]){pointer-events:none;}:host(:focus){outline:none;}.toggle-bar{position:absolute;height:100%;width:100%;border-radius:8px;pointer-events:none;opacity:0.4;transition:background-color linear .08s;background-color:var(--paper-toggle-button-unchecked-bar-color, #000000);@apply --paper-toggle-button-unchecked-bar;}.toggle-button{position:absolute;top:-3px;left:0;height:20px;width:20px;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear .08s, background-color linear .08s;transition:transform linear .08s, background-color linear .08s;will-change:transform;background-color:var(--paper-toggle-button-unchecked-button-color, var(--paper-grey-50));@apply --paper-toggle-button-unchecked-button;}.toggle-button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .toggle-bar{opacity:0.5;background-color:var(--paper-toggle-button-checked-bar-color, var(--primary-color));@apply --paper-toggle-button-checked-bar;}:host([disabled]) .toggle-bar{background-color:#000;opacity:0.12;}:host([checked]) .toggle-button{-webkit-transform:translate(16px, 0);transform:translate(16px, 0);}:host([checked]:not([disabled])) .toggle-button{background-color:var(--paper-toggle-button-checked-button-color, var(--primary-color));@apply --paper-toggle-button-checked-button;}:host([disabled]) .toggle-button{background-color:#bdbdbd;opacity:1;}.toggle-ink{position:absolute;top:-14px;left:-14px;right:auto;bottom:auto;width:48px;height:48px;opacity:0.5;pointer-events:none;color:var(--paper-toggle-button-unchecked-ink-color, var(--primary-text-color));@apply --paper-toggle-button-unchecked-ink;}:host([checked]) .toggle-ink{color:var(--paper-toggle-button-checked-ink-color, var(--primary-color));@apply --paper-toggle-button-checked-ink;}.toggle-container{display:inline-block;position:relative;width:36px;height:14px;margin:4px 1px;}.toggle-label{position:relative;display:inline-block;vertical-align:middle;padding-left:var(--paper-toggle-button-label-spacing, 8px);pointer-events:none;color:var(--paper-toggle-button-label-color, var(--primary-text-color));}:host([invalid]) .toggle-bar{background-color:var(--paper-toggle-button-invalid-bar-color, var(--error-color));}:host([invalid]) .toggle-button{background-color:var(--paper-toggle-button-invalid-button-color, var(--error-color));}:host([invalid]) .toggle-ink{color:var(--paper-toggle-button-invalid-ink-color, var(--error-color));}</style><div class="toggle-container"><div id="toggleBar" class="toggle-bar"></div><div id="toggleButton" class="toggle-button"></div></div><div class="toggle-label"><slot></slot></div></template><script>Polymer({is:'paper-toggle-button',behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:'button',"aria-pressed":'false',tabindex:0},properties:{},listeners:{track:'_ontrack'},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){Polymer.Gestures.setTouchAction(this,'pan-y')})},_ontrack:function(b){var c=b.detail;'start'===c.state?this._trackStart(c):'track'===c.state?this._trackMove(c):'end'===c.state&&this._trackEnd(c)},_trackStart:function(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')},_trackMove:function(b){var c=b.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+c:c)),this.translate3d(this._x+'px',0,0,this.$.toggleButton),this._userActivate(this._x>this._width/2)},_trackEnd:function(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)},_createRipple:function(){this._rippleContainer=this.$.toggleButton;var b=Polymer.PaperRippleBehavior._createRipple();return b.id='ink',b.setAttribute('recenters',''),b.classList.add('circle','toggle-ink'),b}});</script></dom-module></div><dom-module id="kassa-admin-tooted"><template><style></style><kassa-table items="[[_mapIdsToValues(products, productGroups)]]" edit-func="doProductsPatch" add-func="doProductsPost" dialog="[[dialog]]" convent-id="[[conventId]]" scroll-target="[[scrollTarget]]" row-details-info="[[rowDetailsInfo]]"><vaadin-grid-column flex-grow="0" width="3em"><template class="header"><span style="text-align: right">Id</span></template><template><span style="text-align: right">[[item.id]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="10"><template class="header"><vaadin-grid-filter path="name" value="{{_nameFilter}}"><paper-input label="Toode" value="{{_nameFilter}}" slot="filter" no-label-float=""></paper-input></vaadin-grid-filter></template><template><span class$="[[item.status]]">[[item.name]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header"><span style="text-align: right">Suurus</span></template><template><span class$="[[item.status]]" style="text-align: right">[[formatAmount(item.amount, item.amountType)]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header">Grupp</template><template><span class$="[[item.status]]">[[item.productGroup]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header"><span style="text-align: right">Hind</span></template><template><span class$="[[item.status]]" style="text-align: right">[[eur2str(item.price)]]</span></template></vaadin-grid-column></kassa-table><paper-dialog id="dialog" modal="" style="max-width: 350px"><kassa-material direction="vertical"><paper-input data-field="name" label="Nimi" type="text"></paper-input><div style="display: flex; flex-flow: row nowrap; align-items: flex-end"><paper-input data-field="amount" label="Suurus" type="number" min="0" style="flex: 1 1 50%"></paper-input><vaadin-combo-box data-field="amountType" label="Ühik" item-label-path="label" item-value-path="value" items="[[productAmountTypeNames]]" style="flex: 1 1 40%; padding-left: 0.8em"></vaadin-combo-box></div><vaadin-combo-box data-field="productGroupId" label="Grupp" item-label-path="name" item-value-path="id" items="[[productGroups]]"></vaadin-combo-box><paper-input data-field="price" label="Hind (€)" type="number" min="0" step="0.1"></paper-input><paper-toggle-button data-field="status">Käibel?</paper-toggle-button></kassa-material><div class="buttons"><paper-button dialog-dismiss="" raised="" disabled="[[_isRequestLoading]]">Sulge</paper-button><kassa-confirm-button style="margin-right: 16px" confirmed="{{_isRequestLoading}}">Salvesta</kassa-confirm-button></div></paper-dialog></template><script>Polymer({is:'kassa-admin-tooted',properties:{conventId:{type:Number},activeProducts:{type:Array},inactiveProducts:{type:Array},products:{type:Array,computed:'_merge(activeProducts.*, inactiveProducts.*)'},productGroups:{type:Array},rowDetailsInfo:{type:Object},dialog:{type:Node}},behaviors:[PageBehavior,KassaBehavior],observers:['_loadProducts(pageActive, conventId)'],ready:function(){this.set('dialog',this.$.dialog),this.set('rowDetailsInfo',{name:'kassa-admin-tooted'})},setUp:function(){this.fire('kassa-backend-action',{action:'doProductGroupsGet'})},cleanUp:function(){this.set('activeProducts',[]),this.set('inactiveProducts',[])},_loadProducts:function(b,c){b&&(this.fire('kassa-page-loading'),this.cleanUp(),this.fire('kassa-backend-action',{action:'doProductsGetAll',conventId:c,onSuccess:function(){this.fire('kassa-page-ready',{page:this})}.bind(this)}))},_merge:function(b,c){return void 0!==b.base&&void 0!==c.base?b.base.concat(c.base):[]},_mapIdsToValues:function(b,c){return void 0!==b&&void 0!==c?this.mapIdsToValues(b,{productGroupId:[c,'name']}):[]}});</script></dom-module></body></html>