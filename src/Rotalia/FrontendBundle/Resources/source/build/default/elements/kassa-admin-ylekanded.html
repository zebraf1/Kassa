<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="iron-autogrow-textarea" assetpath="../bower_components/iron-autogrow-textarea/"><template><style>:host{display:inline-block;position:relative;width:400px;border:1px solid;padding:2px;-moz-appearance:textarea;-webkit-appearance:textarea;overflow:hidden;}.mirror-text{visibility:hidden;word-wrap:break-word;@apply --iron-autogrow-textarea;}.fit{@apply --layout-fit;}textarea{position:relative;outline:none;border:none;resize:none;background:inherit;color:inherit;width:100%;height:100%;font-size:inherit;font-family:inherit;line-height:inherit;text-align:inherit;@apply --iron-autogrow-textarea;}textarea::-webkit-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea::-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-ms-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}</style><div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div><div class="textarea-container fit"><textarea id="textarea" name$="[[name]]" aria-label$="[[label]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" disabled$="[[disabled]]" rows$="[[rows]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]"></textarea></div></template></dom-module><script>Polymer({is:'iron-autogrow-textarea',behaviors:[Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{value:{observer:'_valueChanged',type:String,notify:!0},bindValue:{observer:'_bindValueChanged',type:String,notify:!0},rows:{type:Number,value:1,observer:'_updateCached'},maxRows:{type:Number,value:0,observer:'_updateCached'},autocomplete:{type:String,value:'off'},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},maxlength:{type:Number},label:{type:String}},listeners:{input:'_onInput'},get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(a){this.$.textarea.selectionStart=a},set selectionEnd(a){this.$.textarea.selectionEnd=a},attached:function(){var b=navigator.userAgent.match(/iP(?:[oa]d|hone)/);b&&(this.$.textarea.style.marginLeft='-3px')},validate:function(){var b=this.$.textarea.validity.valid;return b&&(this.required&&''===this.value?b=!1:this.hasValidator()&&(b=Polymer.IronValidatableBehavior.validate.call(this,this.value))),this.invalid=!b,this.fire('iron-input-validate'),b},_bindValueChanged:function(b){this.value=b},_valueChanged:function(b){var c=this.textarea;c&&(c.value!==b&&(c.value=b||0===b?b:''),this.bindValue=b,this.$.mirror.innerHTML=this._valueForMirror())},_onInput:function(b){var c=Polymer.dom(b).path;this.value=c?c[0].value:b.target.value},_constrain:function(b){var c;for(b=b||[''],c=0<this.maxRows&&b.length>this.maxRows?b.slice(0,this.maxRows):b.slice(0);0<this.rows&&c.length<this.rows;)c.push('');return c.join('<br/>')+'&#160;'},_valueForMirror:function(){var b=this.textarea;if(b)return this.tokens=b&&b.value?b.value.replace(/&/gm,'&amp;').replace(/"/gm,'&quot;').replace(/'/gm,'&#39;').replace(/</gm,'&lt;').replace(/>/gm,'&gt;').split('\n'):[''],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)}});</script><dom-module id="paper-textarea" assetpath="../bower_components/paper-input/"><template><style>:host{display:block;}:host([hidden]){display:none !important;}label{pointer-events:none;}</style><paper-input-container no-label-float$="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><label hidden$="[[!label]]" aria-hidden="true" for="input" slot="label">[[label]]</label><iron-autogrow-textarea id="input" class="paper-input-input" slot="input" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" bind-value="{{value}}" invalid="{{invalid}}" validator$="[[validator]]" disabled$="[[disabled]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" autocapitalize$="[[autocapitalize]]" rows$="[[rows]]" max-rows$="[[maxRows]]" on-change="_onChange"></iron-autogrow-textarea><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container></template></dom-module><script>Polymer({is:'paper-textarea',behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:'_ariaLabelledByChanged',type:String},_ariaDescribedBy:{observer:'_ariaDescribedByChanged',type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},_ariaLabelledByChanged:function(b){this.$.input.textarea.setAttribute('aria-labelledby',b)},_ariaDescribedByChanged:function(b){this.$.input.textarea.setAttribute('aria-describedby',b)},get _focusableElement(){return this.$.input.textarea}});</script></div><dom-module id="kassa-admin-ylekanded"><template><style>kassa-material{margin-bottom:1em;}</style><kassa-material direction="horizontal"><kassa-date-picker on-kassa-confirm="_loadTransfers" start-date="{{_startDate}}" end-date="{{_endDate}}"></kassa-date-picker></kassa-material><kassa-table items="[[_mapIdsToValues(transfers.*, members)]]" add-func="doTransfersPost" dialog="[[dialog]]" scroll-target="[[scrollTarget]]" convent-id="[[conventId]]" row-details-info="[[rowDetailsInfo]]"><vaadin-grid-column flex-grow="0" width="3em"><template class="header"><span style="text-align: right">Id</span></template><template><span style="text-align: right">[[item.id]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="1"><template class="header"><vaadin-grid-filter path="member" value="{{_nameFilter}}"><paper-input label="Nimi" value="{{_nameFilter}}" slot="filter" no-label-float=""></paper-input></vaadin-grid-filter></template><template><span>[[item.member]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header"><span style="text-align: right">Summa</span></template><template><span style="text-align: right">[[eur2str(item.sum)]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0"><template class="header">Lisaja</template><template><span>[[item.createdBy]]</span></template></vaadin-grid-column><vaadin-grid-column flex-grow="0" width="150px"><template class="header">Aeg</template><template><span>[[item.createdAt]]</span></template></vaadin-grid-column></kassa-table><paper-dialog id="transfersDialog" modal="" style="max-width: 350px"><kassa-material direction="vertical"><vaadin-combo-box data-field="memberId" label="Kasutaja" item-label-path="name" item-value-path="id" items="[[members]]"></vaadin-combo-box><paper-input data-field="sum" label="Summa (â‚¬)" type="number" step="0.1"></paper-input><paper-textarea data-field="comment" label="Kommentaar" style="width:100%"></paper-textarea></kassa-material><div class="buttons"><paper-button dialog-dismiss="" raised="" disabled="[[_isRequestLoading]]">Sulge</paper-button><kassa-confirm-button style="margin-right: 16px" confirmed="{{_isRequestLoading}}">Salvesta</kassa-confirm-button></div></paper-dialog></template><script>Polymer({is:'kassa-admin-ylekanded',properties:{conventId:{type:Number},transfers:{type:Array},members:{type:Array},dialog:{type:Node},rowDetailsInfo:{type:Object},_startDate:{type:String},_endDate:{type:String}},behaviors:[PageBehavior,KassaBehavior],observers:['_loadTransfers(pageActive, conventId)'],ready:function(){this.set('dialog',this.$.transfersDialog),this.set('rowDetailsInfo',{name:'kassa-admin-ylekanded'})},setUp:function(){this.fire('kassa-backend-action',{action:'doMembersGet'})},cleanUp:function(){this.set('transfers',[])},_loadTransfers:function(){this.pageActive&&(this.fire('kassa-page-loading'),this.cleanUp(),this.fire('kassa-backend-action',{action:'doTransfersGet',conventId:this.conventId,dateFrom:this._startDate,dateUntil:this._endDate,onSuccess:function(){this.fire('kassa-page-ready',{page:this})}.bind(this)}))},_mapIdsToValues:function(b,c){return b=b.base,void 0!==b&&void 0!==c?this.mapIdsToValues(b,{memberId:[c,'name']}):[]}});</script></dom-module></body></html>