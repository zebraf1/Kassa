<link rel="import" href="../bower_components/neon-animation/neon-animatable-behavior.html">

<script>
    /**
     * @polymerBehavior
     */
    PageBehaviorImpl = {

        properties: {
            pageActive: {
                type: Boolean,
                value: false,
                readOnly: true
            },
            productAmountTypeNames: {
                type: Array,
                readOnly: true,
                value: function() {
                    return [
                        {label: 'T체kk', value: 'PIECE'},
                        {label: 'Liiter', value: 'LITRE'},
                        {label: 'Kg', value: 'KG'}
                    ]
                }
            }
        },

        attached: function () {
            var target = this.$$('[kassa-scroll-target]');
            if(target) {
                target.$.table.$.scroller.$.outerscroller.scrollTarget.addEventListener('scroll', this._setTableHeight.bind(target.$.table));
            }

             //V채ike fix, dialoogid ja toast j채채vad muidu varju
            var body = document.querySelector('body');
            var elements = Polymer.dom(this.root).querySelectorAll('paper-dialog');
            for (var i = 0; i < elements.length; i++) {
                body.appendChild(elements[i]);
            }
        },
        sharedSetUp: function () {
            this._setPageActive(true);
            
            //kassa-scroll-target
            var target = this.$$('[kassa-scroll-target]');
            if (target) {
                this.fire('kassa-set-scroll-target', {target: target.$.table.$.scroller.$.outerscroller.scrollTarget});
                this._setTableHeight.bind(target.$.table)();
            } else {
                this.fire('kassa-set-scroll-target', {target: null});
            }
            //Private set up
            this.setUp();
        },
        sharedCleanUp: function () {
            this.cleanUp();
            this._setPageActive(false);
        },
        //Methods to be overridden by implementing elements
        setUp: function () {},
        cleanUp: function () {},

        //Utility functions
        _setTableHeight: function() {
            var rect = this.getBoundingClientRect();
            this.style.height = rect.height + window.innerHeight - rect.bottom - 10 + 'px';
        }
    };

    /**
     * @polymerBehavior
     */
    PageBehavior = [PageBehaviorImpl, Polymer.NeonAnimatableBehavior]
</script>