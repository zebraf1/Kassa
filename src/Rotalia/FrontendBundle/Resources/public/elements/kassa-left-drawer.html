<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-spinner/paper-spinner.html">

<link rel="import" href="kassa-icons.html">
<link rel="import" href="kassa-rotating-selector.html">
<link rel="import" href="kassa-behavior.html">

<dom-module id="kassa-left-drawer">
    <template>
        <style>
            :host {
                background-color: var(--kassa-dark-color);
                box-shadow: 4px 0 4px rgba(0, 0, 0, 0.3);
                height: 100%;
                display: flex;
                flex-flow: column nowrap;
                padding-bottom: 0.5em;
                box-sizing: border-box;
            }

            #leftHead {
                height: 192px;
                color: var(--kassa-primary-color);
                display: flex;
                flex-flow: column nowrap;
                justify-content: flex-end;
                padding: 0 1em;
            }

            #leftHead h2, #leftHead h3 {
                margin: 0.3em 0;
            }

            paper-menu {
                width: 100%;
                background-color: var(--kassa-dark-color);
                padding: 0;
                
                --paper-menu-selected-item: {
                    background-color: #023356;
                }
            }

            paper-menu a {
                display: block;
                color: #FFF;
                box-sizing: border-box;
                padding: 0.5em 1em;
                font-size: 1.2em;
                font-weight: bold;
                text-decoration: none;
                border-top: 1px solid var(--kassa-secondary-color);
                border-bottom: 1px solid var(--kassa-secondary-color);
            }
            
            paper-menu a:hover {
                background-color: #01233B;
            }

            paper-menu a:first-child {
                border-top: 2px solid var(--kassa-secondary-color);
            }

            paper-menu a:last-child {
                border-bottom: 2px solid var(--kassa-secondary-color);
            }
            
            main {
                overflow-y: auto;
                height: 100%;
                flex: 1 1 100%;
            }
            
            .bottom-button {
                display: block;
                box-sizing: border-box;
                padding: 0.5em 1em;
                font-size: 1.2em;
                font-weight: bold;
                width: 100%;
                height: 2.2em;
            }
            
            .bottom-button {
                color: var(--kassa-primary-color);
                text-decoration: none;
                cursor: pointer;
            }
            
            .bottom-button:hover {
                text-shadow: 0px 0px 2px var(--kassa-primary-color);
            }
            
            iron-icon {
                height: 1.2em;
                width: 1.2em;
                margin-bottom: 0.3em;
                margin-right: 0.4em;
            }
            
            [hidden] { 
                display: none; 
            }


        </style>
        <main>
            <div id="leftHead">
                <h2>{{member.name}}</h2>
                <h3  hidden$="[[!isTrue(member)]]">Saldo: {{eur2str(member.creditBalance)}}</h3>
            </div>

            <paper-menu selected="{{page}}" attr-for-selected="data-page" hidden$="[[!isTrue(member)]]">
                <template is="dom-repeat" items="[[navigation]]" as="site">
                    <a data-page="[[site.page]]" href="#/[[site.page]]">[[site.name]]</a>
                </template>
            </paper-menu>
        </main>
        <kassa-rotating-selector hidden$="[[!isTrue(member)]]" class="bottom-button" member="{{member}}" active-convents="[[activeConvents]]"><iron-icon icon="kassa:room"></iron-icon></kassa-rotating-selector>
        <a href="#/login" hidden$="[[!isTrue(member)]]" class="bottom-button"><iron-icon icon="kassa:exit-to-app"></iron-icon>Logi v√§lja</a>
    </template>
    <script>
        Polymer({
            is: "kassa-left-drawer",
            properties: {
                member: {
                    type: Object,
                    notify: true
                },
                page: {
                    type: String
                },
                activeConvents: {
                    type: Array
                },
                navigation: {
                    type: Array
                }
            },
            behaviors: [KassaBehavior]
        })
    </script>
</dom-module>
